{"version":3,"sources":["../src/index.js"],"names":[],"mappings":"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","file":"src/index.js","sourcesContent":["/*! heavily inspired from Andrea Giammarchi - https://github.com/WebReflection/es-class */\n/* jshint evil: true */\n\n// verifies a key is not special for the class\nvar specialKeys = 'name abstract constructor extends implements prototype static with'.split(' ');\nvar isNotASpecialKey = function(key, allowInit) {\n    return specialKeys.indexOf(key) === -1;\n};\n\nvar warn = console.warn || function() {};\n\n// configure enumerable source properties in the target\nvar copyProperties = function copyProperties(source, target, allowInit) {\n    var sourceIsFunction = typeof source === 'function';\n    Object.getOwnPropertyNames(source).forEach((key) => {\n        if (sourceIsFunction && ['name', 'displayName', 'arguments', 'caller', 'length'].indexOf(key) !== -1) {\n            return;\n        }\n        if (isNotASpecialKey(key) && (allowInit || key !== 'init')) {\n            if (target.hasOwnProperty(key)) {\n                warn('duplicated: ' + key);\n            } else {\n                var descriptor = Object.getOwnPropertyDescriptor(source, key);\n                var isConst = key.startsWith('const_');\n                var isLazy = key.startsWith('lazyProperty_');\n                var targetKey, lazyPropertyComputer;\n                if (isConst) {\n                    targetKey = key.substr('const_'.length);\n                } else if (isLazy) {\n                    lazyPropertyComputer = descriptor.value || descriptor.get;\n                    targetKey = key.substr('lazyProperty_'.length);\n                } else {\n                    targetKey = key;\n                }\n\n                Object.defineProperty(\n                    target,\n                    targetKey,\n                    descriptor.get || descriptor.set || isLazy ? {\n                        enumerable: false,\n                        get: !isLazy ? descriptor.get : function() {\n                            Object.defineProperty(this, targetKey, {\n                                writable: false,\n                                configurable: false,\n                                enumerable: false,\n                                value: lazyPropertyComputer()\n                            });\n                        },\n                        set: descriptor.set\n                    } : {\n                        writable: false,\n                        configurable: !isConst,\n                        enumerable: false,\n                        value: descriptor.value\n                    }\n                );\n            }\n        }\n    });\n};\n\n// copy all imported enumerable methods and properties\nvar addMixins = function addMixins(mixins, target, inherits) {\n    var init = [];\n    mixins.forEach((mixin) => {\n        if (mixin.hasOwnProperty('init')) {\n            init.push(mixin.init);\n        }\n        copyProperties(mixin, target, false);\n    });\n    return init;\n};\n\n// basic check against expected properties or methods\nvar verifyImplementations = function verifyImplementations(interfaces, target) {\n    interfaces.forEach((_interface) => {\n        Object.keys(_interface).forEach((key) => {\n            if (!target.hasOwnProperty(key)) {\n                warn(key + ' is not implemented');\n            }\n        });\n    });\n};\n\n\nexports.newClass = function newClass(description) {\n    var hasConstructor = description.hasOwnProperty('constructor');\n    var hasName = description.hasOwnProperty('name');\n    var hasParent = description.hasOwnProperty('extends');\n    var parent = description.extends;\n    var hasParentPrototype = hasParent && typeof parent === 'function';\n    var inherits = hasParentPrototype ? parent.prototype : parent;\n    var constructor = description.constructor;\n    if (!hasConstructor) {\n        if (hasParent && hasParentPrototype) {\n            constructor = function() {\n                return parent.apply(this, arguments);\n            };\n        } else {\n            constructor = function() {};\n        }\n    } else {\n        if (!constructor) {\n            throw new Error('Invalid function constructor');\n        }\n    }\n    if (hasName && constructor.name !== description.name) {\n        try {\n            Object.defineProperty(constructor, 'name', {\n                value: description.name,\n                writable: false,\n                enumerable: false\n            });\n            Object.defineProperty(constructor, 'displayName', {\n                value: description.name,\n                writable: false,\n                enumerable: false\n            });\n        } catch (e) {\n            var fnCreator = new Function(\n                'init',\n                'return function ' + description.name + '(){return init.apply(this,arguments);}'\n            );\n            constructor = fnCreator(constructor);\n        }\n    }\n\n    var prototype = hasParent ? Object.create(inherits) : constructor.prototype;\n\n    if (!prototype) {\n        throw new Error('Invalid function constructor: invalid prototype');\n    }\n\n    // add modules/mixins (that might swap the constructor)\n    if (description.hasOwnProperty('with')) {\n        var mixins = addMixins([].concat(description.with), prototype, inherits);\n        if (mixins.length) {\n            constructor = (function(parent) {\n                return function() {\n                    mixins.forEach((mixin) => {\n                        mixin.call(this);\n                    });\n                    return parent.apply(this, arguments);\n                };\n            }(constructor));\n        }\n    }\n\n    constructor.prototype = prototype;\n\n    if (description.hasOwnProperty('static')) {\n        // add public static properties\n        copyProperties(description.static, constructor, true);\n    }\n\n    if (hasParent) {\n        // in case it's a function\n        if (parent !== inherits) {\n            // copy possibly inherited statics too\n            copyProperties(parent, constructor, true);\n        }\n        constructor.prototype = prototype;\n    }\n\n    if (prototype.constructor !== constructor) {\n        Object.defineProperty(prototype, 'constructor', {\n            writable: true,\n            configurable: true,\n            enumerable: false,\n            value: constructor\n        });\n    }\n\n    // enrich the prototype\n    copyProperties(description, prototype, true);\n\n    if (description.hasOwnProperty('implements')) {\n        verifyImplementations([].concat(description.implements), prototype);\n    }\n\n    return constructor;\n};\n"]}