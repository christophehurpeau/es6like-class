{"version":3,"sources":["../src/test.js"],"names":[],"mappings":"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","file":"tests/src/test.js","sourcesContent":["/* global test */\nvar assert = require('proclaim');\nvar lib = '../../lib' + (process.env.TEST_COV && '-cov' || '') + '/';\n\n\n\nvar message = '';\nconsole.warn = function(warning) {\n    message += warning;\n};\nvar newClass = require(lib).newClass;\n\ntest('check if Class is a function', function() {\n    assert.isFunction(newClass);\n});\n\ntest('check the constructor', function() {\n    var A = newClass({\n        constructor: function A() {\n            assert.strictEqual(this.constructor, A);\n        }\n    });\n\n    new A();\n});\n\ntest('constructor name', function() {\n    var B = newClass({ name: 'B' });\n    assert.strictEqual(B.name, 'B');\n});\n\ntest('constructor is not defined', function() {\n    var B = newClass({});\n    assert.strictEqual((new B()).constructor, B);\n});\n\ntest('extends classes', function() {\n    var A = newClass({ hello: true });\n    var B = newClass({ extends: A });\n\n    var b = new B();\n    assert.strictEqual(b.hello, true);\n    assert.notOk(B.prototype.hasOwnProperty('extends'));\n});\n\ntest('extends constructor', function() {\n    var A = newClass({\n        constructor: function A(value) {\n            this.initialized = value;\n        }\n    });\n\n    var B = newClass({\n        extends: A\n    });\n\n    var b = new B(123);\n    assert.strictEqual(b.initialized, 123);\n});\n\ntest('extends with defined constructor', function() {\n    var A = newClass({\n        constructor: function A(value) {\n            this.initialized = value;\n        }\n    });\n\n    var B = newClass({\n        extends: A,\n\n        constructor: function B(value) {\n            assert.strictEqual(this.constructor, B);\n            this.bValue = value;\n        }\n    });\n\n    var b = new B(123);\n    assert.strictEqual(b.initialized, undefined);\n    assert.strictEqual(b.bValue, 123);\n});\n\n\ntest('extends isInstanceOf', function() {\n    var A = newClass({\n        constructor: function A() {\n        }\n    });\n\n    var B = newClass({\n        extends: A\n    });\n\n    var C = newClass({\n        extends: B\n    });\n\n    assert.isInstanceOf(new A(), A);\n    assert.isNotInstanceOf(new A(), B);\n    assert.isNotInstanceOf(new A(), C);\n\n    assert.isInstanceOf(new B(), A);\n    assert.isInstanceOf(new B(), B);\n    assert.isNotInstanceOf(new B(), C);\n\n    assert.isInstanceOf(new C(), A);\n    assert.isInstanceOf(new C(), B);\n    assert.isInstanceOf(new C(), C);\n});\n\n\ntest('static properties', function() {\n    var A = newClass({\n        static: {\n            a: 1\n        }\n    });\n\n    var B = newClass({\n        extends: A,\n        static: {\n            b: 2\n        }\n    });\n\n    assert.strictEqual(A.a, 1);\n    assert.strictEqual(A.b, undefined);\n\n    assert.ok(A.hasOwnProperty('a'));\n    assert.notOk(A.hasOwnProperty('b'));\n    assert.notOk(A.prototype.hasOwnProperty('a'));\n    assert.notOk(A.prototype.hasOwnProperty('static'));\n\n    assert.strictEqual(B.a, 1);\n    assert.strictEqual(B.b, 2);\n    assert.ok(B.hasOwnProperty('a'));\n    assert.ok(B.hasOwnProperty('b'));\n    assert.notOk(B.prototype.hasOwnProperty('a'));\n    assert.notOk(B.prototype.hasOwnProperty('b'));\n});\n\n\ntest('class toString method', function() {\n    var A = newClass({\n        toString() {\n            return 'a';\n        }\n    });\n    assert.strictEqual(('' + new A()), 'a');\n});\n\ntest('class static and property', function() {\n    var A = newClass({\n        static: {\n            A: 'staticValue'\n        },\n        A: 'instanceValue'\n    });\n\n    var a = new A();\n    assert.strictEqual(A.A, 'staticValue');\n    assert.strictEqual(a.A, 'instanceValue');\n});\n\n\ntest('class static override', function() {\n    var A = newClass({\n        static: {\n            hello: 'aValue'\n        }\n    });\n\n    var B = newClass({\n        extends: A,\n        static: {\n            hello: 'bValue'\n        }\n    });\n\n    assert.strictEqual(A.hello, 'aValue');\n    assert.strictEqual(B.hello, 'bValue');\n});\n\ntest('class extends object', function() {\n    var a = { a: 1 };\n    var B = newClass({\n        extends: a,\n        b: 2\n    });\n\n    var b = new B();\n\n    assert.strictEqual(b.a, 1);\n    assert.strictEqual(b.b, 2);\n    assert.strictEqual(B.a, undefined);\n    assert.strictEqual(a.b, undefined);\n});\n\n\ntest('class mixin', function() {\n    var sequence = [];\n    var A = newClass({\n        with: {\n            init() {\n                sequence.push('A#mixin');\n            }\n        },\n        constructor() {\n            sequence.push('A#constructor');\n        }\n    });\n    var B = newClass({\n        extends: A,\n        with: {\n            init() {\n                sequence.push('B#mixin');\n            }\n        },\n        constructor() {\n            sequence.push('B#constructor');\n            A.call(this);\n        }\n    });\n    var C = {\n        init() {\n            sequence.push('C#mixin');\n        }\n    };\n    var D = {\n        init() {\n            sequence.push('D#mixin');\n        }\n    };\n    var E = newClass({\n        extends: B,\n        with: [C, D],\n        constructor() {\n            sequence.push('C#constructor');\n            B.call(this);\n        }\n    });\n    new E();\n    assert.equal(sequence.join(','), [\n        'C#mixin',\n        'D#mixin',\n        'C#constructor',\n        'B#mixin',\n        'B#constructor',\n        'A#mixin',\n        'A#constructor'\n        ].join(','));\n});\n\n\ntest('class warning on duplicate', function() {\n    message = '';\n    newClass({\n        with: [{\n            a: 1\n        }, {\n            a: 2\n        }]\n    });\n    assert.equal(message, 'duplicated: a');\n});\n\ntest('class implements', function() {\n    message = '';\n    var A = newClass({\n        implements: {\n            method1: function() {},\n            method2: function() {}\n        },\n        method2: function() {}\n    });\n    assert.equal(message, 'method1 is not implemented');\n\n    message = '';\n    var B = newClass({\n        extends: A\n    });\n\n    message = '';\n    newClass({\n        extends: B,\n        implements: [\n            { a: Object },\n            { b: Object },\n        ],\n        a: Object\n    });\n\n    assert.equal(message, [\n        'b is not implemented'\n    ].join(''));\n});\n\n"]}